<template>
	<section id="intro" class="intro">
		<video autoplay muted loop playsinline>
			<source src="/videoplayback.mp4" type="video/mp4" />
		</video>

		<div class="logo">
			<svg viewBox="0 0 512 512">
				<path d="M80.31,207.5H57.12v35.16H30.4V128H79.89a45.34,45.34,0,0,1,16.65,3,39.34,39.34,0,0,1,13.11,8.31,37.81,37.81,0,0,1,8.55,12.6,40.72,40.72,0,0,1,3.08,16,41.47,41.47,0,0,1-3,16.06,36.8,36.8,0,0,1-8.48,12.52,38.45,38.45,0,0,1-13,8.13A45.45,45.45,0,0,1,80.31,207.5ZM57.12,184.57H78.79A14.74,14.74,0,0,0,85,183.26a16.12,16.12,0,0,0,8.38-8.81,17.3,17.3,0,0,0,1.23-6.57,17.48,17.48,0,0,0-1.23-6.54A17.07,17.07,0,0,0,90,156a16.06,16.06,0,0,0-5-3.67,14.32,14.32,0,0,0-6.16-1.35H57.12Z" />
				<path d="M137.05,242.66V128h26.72V242.66Z" />
				<path d="M282.05,242.66H251.36l-20-37.35h-17v37.35H187.63V128h50.24a47.62,47.62,0,0,1,16.65,2.82,38.77,38.77,0,0,1,13.11,7.93A35.84,35.84,0,0,1,276.19,151a39.49,39.49,0,0,1,3.08,15.81,42.48,42.48,0,0,1-1.48,11.42,35.79,35.79,0,0,1-4.25,9.74,34.48,34.48,0,0,1-6.75,7.76,38.21,38.21,0,0,1-8.94,5.65Zm-67.7-60.28h22.43a16.48,16.48,0,0,0,6.15-1.14,15.67,15.67,0,0,0,5-3.16,14.35,14.35,0,0,0,3.37-4.89,17.32,17.32,0,0,0,0-12.77,15.19,15.19,0,0,0-3.37-5,15.67,15.67,0,0,0-5-3.29,16.11,16.11,0,0,0-6.15-1.18H214.35Z" />
				<path d="M409.35,242.66H381.19l-7.33-18.21H325.8l-7.25,18.21H290.31l47-114.74h25.12Zm-59.6-79.34L348.9,167,335,201.68h29.68L350.76,167l-.84-3.71Z" />
				<path d="M431,242.66V150.93H399V128h90.71v22.93h-32v91.73Z" />
				<path d="M99.15,351.78,115.34,369a65.73,65.73,0,0,1-8.52,7.29,58.9,58.9,0,0,1-10.28,5.94,63.27,63.27,0,0,1-11.85,4,57.71,57.71,0,0,1-13.19,1.47,63.83,63.83,0,0,1-44.3-17.57A60.84,60.84,0,0,1,13.79,351a58.26,58.26,0,0,1,0-46.91A61,61,0,0,1,27.2,285.05a62.73,62.73,0,0,1,19.89-12.81,63.76,63.76,0,0,1,24.41-4.68,58.56,58.56,0,0,1,13,1.39,62.54,62.54,0,0,1,11.64,3.84,57.7,57.7,0,0,1,10.28,5.9,72.26,72.26,0,0,1,8.94,7.59L99.07,303.56A33.58,33.58,0,0,0,86.84,294a35.91,35.91,0,0,0-15.34-3.37,35.16,35.16,0,0,0-14,2.82A35.52,35.52,0,0,0,46,301.2,36.68,36.68,0,0,0,38.32,313a39.78,39.78,0,0,0,0,29.42A36.68,36.68,0,0,0,46,354.14a35.52,35.52,0,0,0,11.46,7.8,35.89,35.89,0,0,0,29.3-.63A35.88,35.88,0,0,0,99.15,351.78Z" />
				<path d="M229.06,385.08H198.38l-20-37.35h-17v37.35H134.64V270.43h50.25a47.7,47.7,0,0,1,16.65,2.82,38.71,38.71,0,0,1,13.11,7.93,36.11,36.11,0,0,1,8.56,12.22,39.49,39.49,0,0,1,3.07,15.81,43,43,0,0,1-1.47,11.42,36.12,36.12,0,0,1-4.26,9.74,33.93,33.93,0,0,1-6.74,7.75,38.62,38.62,0,0,1-8.94,5.65ZM161.37,324.8h22.42a16.73,16.73,0,0,0,6.16-1.13,15.65,15.65,0,0,0,5-3.17,14.27,14.27,0,0,0,3.38-4.89,17.32,17.32,0,0,0,0-12.77,15.07,15.07,0,0,0-3.38-5,15.46,15.46,0,0,0-5-3.29,16,16,0,0,0-6.16-1.18H161.37Z" />
				<path d="M245.67,385.08V270.43h80.77v23h-54v23.44h46.36v22.93H272.4v22.34h54.8v22.93Z" />
				<path d="M450.7,342.51l29.43-72.17h28.15L460.82,385.08H436.71l-14.33-34.56-14.25,34.56H384L336.47,270.34h28.24l29.34,72.17,1.69,6.57h.59l1.68-6.57,10.46-25.63-19.23-46.54h28.25l29.33,72.17,1.61,6.57h.67Z" />
			</svg>
		</div>
	</section>
</template>

<script>
import { introAnim } from '~/assets/anime'

export default {
	data: () => ({}),
	mounted() {
		const letters = document.querySelectorAll('svg path')
		introAnim(letters)

		const video = document.querySelector('video')
		function checkLoad() {
			if (video.readyState === 4) {
				document.querySelector('.intro video').classList.add('loaded')
				document.querySelector('.intro .logo').classList.add('hide')
			} else {
				setTimeout(checkLoad, 100)
			}
		}
		checkLoad()
	},
}
</script>

<style lang="scss" scoped>
@import '~/assets/colors.scss';
$size: 40px;

.intro {
	width: 100%;
	min-height: 100vh;
	padding: 0;
	background-color: #000;
	position: relative;
	overflow: hidden;

	display: flex;
	flex-direction: column;
	justify-content: center;
	align-items: center;

	video {
		width: 100vw;
		position: absolute;
		top: 50%;
		left: 50%;
		transform: translate(-50%, -50%);
		object-fit: cover;
		z-index: 0;

		transition: opacity 0.5s ease;
		transition-delay: 2s;
		&.loaded {
			opacity: 1;
		}
	}
	.logo {
		width: 30vw;
		height: auto;
		z-index: 1;

		display: flex;
		flex-direction: column;
		justify-content: center;
		align-items: center;
		&.hide {
			opacity: 0;
		}
		svg {
			width: 100%;
			fill: none;
			stroke: white;
			stroke-width: 2px;
			stroke-miterlimit: 10;
			path {
				opacity: 0;
			}
		}
	}
}

@media (max-width: 900px) {
	.intro {
		video {
			width: auto;
			height: 100vh;
		}
	}
}
</style>
